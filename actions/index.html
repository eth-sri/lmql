<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="description"
        content="LMQL: A query language for programming (large) language models.">
  <meta name="keywords" content="GPT-3, language models, LMQL, programming language, query language, ChatGPT">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=0"/>
  
  <!-- Primary Meta Tags -->
  <title>LMQL Actions: Seamless LLM function calling</title>
  <meta name="title" content="LMQL Actions: Seamless LLM function calling">
  <meta name="description" content="LMQL Actions offers a cross-model interoperability layer to expose LLMs to custom users functions that augment their capabilities.">

  <!-- Open Graph / Facebook -->
  <meta property="og:type" content="website">
  <meta property="og:url" content="https://lmql.ai/">
  <meta property="og:title" content="LMQL Actions: Seamless LLM function calling">
  <meta property="og:description" content="LMQL Actions offers a cross-model interoperability layer to expose LLMs to custom users functions that augment their capabilities.">
  <meta property="og:image" content="https://lmql.ai/static/images/lmql-social.png">

  <!-- Twitter -->
  <meta property="twitter:card" content="summary_large_image">
  <meta property="twitter:url" content="https://lmql.ai/">
  <meta property="twitter:title" content="LMQL Actions: Seamless LLM function calling">
  <meta property="twitter:description" content="LMQL Actions offers a cross-model interoperability layer to expose LLMs to custom users functions that augment their capabilities.">
  <meta property="twitter:image" content="https://lmql.ai/static/images/lmql-social.png"">
  
  
  <link href="https://fonts.googleapis.com/css?family=Google+Sans|Noto+Sans|Castoro" rel="stylesheet">

  <link rel="stylesheet" href="/static/css/bulma.min.css">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/jpswalsh/academicons@1/css/academicons.min.css">
  <link rel="stylesheet" href="/static/css/index.css">
  <link rel="icon" href="/static/images/favicon.svg">
  <link rel="stylesheet" href="/static/css/val.gen.css">
  <link rel="stylesheet" href="/static/css/lmql.css">
  <link rel="stylesheet" href="./lmql-extra.css">
  <link rel="stylesheet" href="/static/css/promptdown.css">
  <link rel="stylesheet" href="/static/css/highlight.min.css">
  <script src="https://kit.fontawesome.com/06bb68d804.js" crossorigin="anonymous"></script>

  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
  <script src="/static/js/highlight.min.js"></script>
  <script src="/static/js/lmql.js"></script>
  <script src="/static/js/promptdown.js"></script>

  <!-- Cloudflare Web Analytics --><script defer src='https://static.cloudflareinsights.com/beacon.min.js' data-cf-beacon='{"token": "f7d2a6b1a0624c51ae4dab9a4239b77d"}'></script><!-- End Cloudflare Web Analytics -->
</head>
<body>
  <div class="topnav">
    <a href="/">
      <img src="/static/images/lmql-text.png" alt="LMQL logo" class="logo">
    </a>
    <a href="https://discord.gg/7eJP4fcyNT" class="hide-on-small">
      üí¨
      Discord
    </a>
    <a href="blog">
      üìù
      Blog
    </a>
    <a href="https://docs.lmql.ai">
      üìñ
      Docs
    </a>
    <a href="https://github.com/eth-sri/lmql">
      üì¶
      GitHub</a>
  </div>

  <section class="hero hero-big">
  <div class="hero-body">
    <div class="container is-max-desktop">
      <div class="columns">
        <div class="column column-big">
          <span class="big" style="font-size: 28pt">
            üõ†Ô∏è LMQL Actions: Seamless LLM function calling <span class="badge">Beta</span>
          </span><br/>
          <span class="big-sub">
            <img src="/static/images/lmql.svg" style="height:15pt;"/> <b>LMQL Actions</b> offers a <i>cross-model interoperability layer</i> to expose LLMs to custom users functions that augment their capabilities.
          </span>
          <!-- <div class="is-size-5 publication-authors">
            <span class="author-block">
              <a href="https://www.sri.inf.ethz.ch/people/luca">Luca Beurer-Kellner</a>,</span>
            <span class="author-block">
              <a href="https://www.sri.inf.ethz.ch/people/marc">Marc Fischer</a>,</span>
            <span class="author-block">
              <a href="https://www.sri.inf.ethz.ch/people/martin">Martin Vechev</a>,
            </span>
          </div>

          <div class="is-size-5 publication-authors">
            <span class="author-block"><a href="https://www.sri.inf.ethz.ch"><b>SRI</b>lab</a> @   ETH Z√ºrich, Switzerland</span>
          </div> -->
        </div>
      </div>
    </div>
  </div>
</section>

<section class="hero teaser">
  <div class="container is-max-desktop">
    <div class="hero-body">
      <h2 class="subtitle has-text-centered">
        <!-- <i>LMQL</i> is a programming language for language model interaction. -->
      </h2>
      <div class="example-selector">
        <div class="example-badges">
          <span class="option active" value="precomputed-simple-chat-json">üõ†Ô∏è Inline Tool Use</span>
<span class="option " value="precomputed-react-reasoning-json">üìÉ ReAct Reasoning</span>
<span class="option " value="precomputed-code-interpreter-json">üíª Code Interpreter</span><a class='option' href='/'> More LMQL ‚Üí</a>
        </div>
        <div class="select-bar">
          <!-- <div class="select examples"> -->
            <!-- <select id="select-example"> -->
            <!-- </select> -->
          <!-- </div> -->
        </div>
          
<div id="precomputed-simple-chat-json" class="side-by-side first">
    <div class="query">
        <h3> 
            LMQL
            <a href="/playground?snippet=json-robust" target="_blank">Open In Playground</a>
        </h3>
        <pre>  
<span class="lmql-kw">def</span> <anchor class="anchor-1">wiki<label><div class="multiline">Seamlessly expose standard Python functions as tools during LLM execution, to augment the model with additional capabilities.</div><div class="bridge"></div>
                </label><div class="dot"></div></anchor>(q: str): 
    <span class="lmql-str">"""
    Searches Wikipedia (always use this for
     <span style="color: grey">‚û•</span> factual information).

    Example: wiki("Basketball")
    Result: Basketball is a team sport in
     <span style="color: grey">‚û•</span> which two ...
    """</span>
    ...
<span class="lmql-kw">def</span> calc(expr: str): 
    <span class="lmql-str">"""
    Evaluate the provided arithmetic expression
     <span style="color: grey">‚û•</span> in Python syntax.

    <anchor class="anchor-2">Example: calc("1+2*3")<label><div class="multiline">Based on simple example usage of the <tt>calc</tt> tool, LMQL constructs a dynamic prompt, to allow the LLM to discover and use the tool.</div><div class="bridge"></div>
                </label><div class="dot"></div></anchor>
    Result: 7
    """</span>
    ...

@lmql.query
<span class="lmql-kw">def</span> chatbot_query():
    <span class="lmql-str">"Q: What is the population of the US
     <span style="color: grey">‚û•</span> and Germany combined?"</span>
    <span class="lmql-str">"Let's think step by step"</span>

    <span class="lmql-str">"A: [REASONING]"</span> <span class="lmql-kw">where</span> 
        <span style="color: grey">‚û•</span> <anchor class="anchor-3">inline_use<label><div class="multiline"><tt>inline_use</tt> is one of the supported tool use paradigms, where tool execution is automatically handled inline by the language runtime.</div><div class="bridge"></div>
                </label><div class="dot"></div></anchor>(REASONING, [wiki, calc])

    <span class="lmql-str">"<anchor class="anchor-4">Therefore<label><div class="multiline">After tool execution has finished, <i>intermediate instructions are automatically</i> removed from the program, to avoid cluttering the LLM's reasoning process.</div><div class="bridge"></div>
                </label><div class="dot"></div></anchor> the answer is[ANSWER]"</span> <span class="lmql-kw">where</span> <anchor class="anchor-5">INT(ANSWER)<label><div class="multiline">Use datatype constraints like <tt>INT</tt> to obtain a robust response after the tool-augmented reasoning process has completed.</div><div class="bridge"></div>
                </label><div class="dot"></div></anchor>
        </pre>
    </div>
    <pre id="container" class="promptdown" animate="true" animate-speed="260">### Chat
![bubble:user|Q: What is the population of Germany and the US combined? 
Let's think step by step.][@wait|800]

[@begin|incontext]![bubble:system| In your reasoning you are allowed to use the following tools: [_|wiki] and [_c|calc]. You can use them by typing the name of the tool followed by the input in parentheses. For example, to search for the population of a country, you can type [_|&lt;&lt;wiki("Population of France")|| ... &gt;&gt;]...]
[@end|incontext]
[bubble:assistant| A: First, let's find the population of Germany and the US. We can use the wiki tool to search for the population of each country.
For Germany[_|&lt;&lt;wiki("Population of Germany")||][@wait|100]![TOOL| The demography of Germany is monitored by the Statistisches Bundesamt (Federal Statistical Office of Germany). According to the most recent data, Germany's population is 84,270,625...&gt;&gt;]
For the US, [_|&lt;&lt;wiki("Population of the United States")||][@wait|100]![TOOL| The United States had an official estimated resident population of 333,287,557 ...&gt;&gt;]
Now, let's use the calc tool to add the two populations together. The population of Germany and the US combined is [@wait|100][_c|&lt;&lt;calc("84270625 + 333287557")||]![CALC|417558182&gt;&gt;]
]
[@wait|800]
![bubble:system| (removing intermediate instructions from prompt)]
[@wait|400]
[@fade|incontext]
[@wait|1000]
[bubble:assistant| Therefore the answer is [RESPONSE| 417558182] ]</pre> 
</div>
<div id="precomputed-react-reasoning-json" class="side-by-side ">
    <div class="query">
        <h3> 
            LMQL
            
        </h3>
        <pre>  
<span class="lmql-kw">from</span> <anchor class="anchor-1">lmql.lib.actions<label><div class="multiline">LMQL comes with a standard library of tool use paradigms, but also offers extendibility, allowing the definition of  custom protocols.</div><div class="bridge"></div>
                </label><div class="dot"></div></anchor> <span class="lmql-kw">import</span> reAct, calc, wiki

<span class="lmql-str">"Q: What is two times the birth year of
 <span style="color: grey">‚û•</span> Michelle Obama?"</span>
<span class="lmql-str">"A: Let's think step by step\n"</span>

<span class="lmql-str">"[REASONING]\n"</span> <span class="lmql-kw">where</span> <anchor class="anchor-2">reAct(REASONING, [wiki, calc])<label><div class="multiline">Adhering to the same interface, tool use protocols like <t>reAct</t> can swapped out in a flexible manner, allowing for experimentation with different paradigms.</div><div class="bridge"></div>
                </label><div class="dot"></div></anchor>

<span class="lmql-comment"># determine final response, after reasoning finishes
</span><span class="lmql-str">"Therefore the answer is[ANSWER]"</span> <span class="lmql-kw">where</span> INT(ANSWER)
        </pre>
    </div>
    <pre id="container" class="promptdown" animate="true" animate-speed="260">### Agent Trace

![bubble:user| What is two times the birth year of Michelle Obama?
Let's think step by step] [@begin|incontext] ![bubble:system| Instructions: In your reasoning adhere to the following structure: Thought: <your conclusions>
If required you can also use the following actions: Action: tool(<ARG>), Observation: <TOOL OUTPUT>
Available Tools: wiki: ..., calc: ... . Now you can start reasoning.] [@end|incontext]
[bubble:assistant|Thought: [THOUGHT| To answer this question, I need to know the birth year of Michelle Obama.]
[@wait|400] Action: [ACTION| wiki("Michelle Obama")]
[@wait|400] Observation: [TOOL| Michelle LaVaughn Robinson Obama (born January 17, 1964) is an American attorney and author who served as the first lady of the United States from 2009 to 2017, being married to former president Barack Obama.  
Raised on the South Side of Chicago, Obama is a graduate of Princeton]

[@wait|400] Thought: [THOUGHT| Michelle Obama was born in 1964.]
[@wait|400] Action: [ACTION| calc("2*1964")]
[@wait|400] Observation: [TOOL| 3928]
]
[@wait|800]
![bubble:system| (removing intermediate instructions from prompt)]
[@wait|400]
[@fade|incontext]
[@wait|1000]
[bubble:assistant| Therefore the answer is [ANSWER| 3928] ]</pre> 
</div>
<div id="precomputed-code-interpreter-json" class="side-by-side ">
    <div class="query">
        <h3> 
            LMQL
            
        </h3>
        <pre>  
<span class="lmql-kw">from</span> lmql.lib.actions <span class="lmql-kw">import</span> exec_code

<span class="lmql-str">"Q: Compute the square root of (123123 -
 <span style="color: grey">‚û•</span> 19) * 12."</span>
<span class="lmql-str">"A: Let's think step by step"</span>

<span class="lmql-str">"[REASONING]"</span> <span class="lmql-kw">where</span> <anchor class="anchor-1">exec_code(REASONING)<label><div class="multiline">Using <t><b>exec_code</b></t>, the LLM is instructed to generate code. The generated code is then executed, and the line-wise output is fed back into the LLM, to enable a feedback loop.</div><div class="bridge"></div>
                </label><div class="dot"></div></anchor>

<span class="lmql-str">"Therefore the answer is[ANSWER]"</span>
        </pre>
    </div>
    <pre id="container" class="promptdown" animate="true" animate-speed="260">### Code Generation
![bubble:user|Q: Compute the square root of (123123 - 19) * 12.]
![bubble:system| (LLM can use inline code execution during reasoning)]
[_instr("code=1")|# step by step solution in Python (a solution() 
 # function that returns the result)
]
[_code("code=1")|def solution():
  # Step 1: Calculate (123123 - 19)
  result1 = 123123 - 19 #|| [INTERPRETER| 123104]
  # Step 2: Multiply (123104) by 12 
  result2 = result1 * 12 #|| [INTERPRETER| 1477248]
  # Step 3: Calculate the square root of 1477248 
  result3 = 1477248 ** 0.5 #|| [INTERPRETER| 1215.4209]
  return result3  #|| [INTERPRETER| 1215.4209]
]

[bubble:assistant| Therefore the answer is [ANSWER| 1215.4209] ]</pre> 
</div>
    </div>
    <div class="container is-max-desktop">
      <span class="learn-more">
        <i>Learn more about LMQL by hovering over <anchor>underlined</anchor> parts of the code.</i>
      </span>
    </div>
    </div>
  </div>
</section>


<section class="hero teaser">
  <div class="container is-centered">
    <div class="hero-body has-text-centered" style="margin-top: 30pt;">
      <h2 class="subtitle has-text-centered">
        Get Started with LMQL Actions.
      </h2>
      <p style="margin: auto;">
      LMQL is available in a web-based Playground IDE or can be installed via the Python package manager:
      </p>

      <div class="columns is-getting-started">
        <div class="column getting-started">
          <h2>Explore LMQL</h2>
          <a class="primary" href="https://lmql.ai/playground">
            <i class="fa fa-play"></i>
            Playground IDE
          </a>
          <a href="https://github.com/eth-sri/lmql">
            <i class="fa fa-github"></i>
            GitHub Repo
          </a>
          <a href="https://docs.lmql.ai">
            <i class="fa fa-book"></i>
            Read the Documentation
          </a>
        </div>

        <div class="column getting-started">
          <h2>Install LMQL 0.7 Beta</h2>
          <div class="cmd">
              pip install lmql==0.7b2
          </div>
          To run LMQL locally, read the <span><a href="https://docs.lmql.ai/en/latest/quickstart.html">Getting Started</a></span> section of the documentation.
        </div>
      </div>
      <p style="margin: auto; margin-top: -10pt; text-align: center; font-size: 0.9em;">
        We welcome your feedback and contributions. Join the conversation about LMQL via our <a href="https://discord.gg/7eJP4fcyNT">Community Discord</a>, <a href="https://github.com/eth-sri/lmql/issues">GitHub Issues</a>, or <a href="https://twitter.com/lmqllang">Twitter</a>.
      </p>
    </div>
  </div>
</section>



<section class="section custom-footer">
  <div class="container is-max-desktop content">
    <div class="columns">
      <div class="column" style="text-align: left;">
        LMQL is a project by the <a href="https://www.sri.inf.ethz.ch/">Secure, Reliable, and Intelligent Systems Lab</a> at ETH Z√ºrich.<br/>
        <img src="/static/images/institution-logos.svg"/>
      </div>
      <div class="column" style="text-align: left;">
        Site template adapted from <a href="http://nerfies.github.io/">Nerfies</a> by Keunhong Park et al. and uses <a href="https://bulma.io/">Bulma</a>.<br/>
        Last updated on Fri, Sep 22, 12:31 PM (UTC)<br/>
      </div>
    </div>
  </div>
</section>

</body>
</html>
