import{a2 as T,s as w,a3 as D,a4 as j,a5 as k,a6 as P,a7 as R,a8 as I,a9 as M,aa as $,ab as q,ac as B,V as F,d as V,u as H,j as W,y as X,ad as U,ae as G,af as K}from"./chunks/framework.c2adf1ba.js";import{t as E}from"./chunks/theme.2a4aaf42.js";const L=["blue","purple","pink","magenta","red","orange","lightorange","yellow","ochre"];function J(n){let t=0;if(n.length==0)return t;for(let e=0;e<n.length;e++){let s=n.charCodeAt(e);t=(t<<5)-t+s,t=t&t}return Math.abs(t)}function v(n){if(n.nodeType!=c.ELEMENT_NODE)return null;if(n.hasAttribute("pd-insertion-point"))return n;for(let t=0;t<n.childNodes.length;t++){let e=v(n.childNodes[t]);if(e)return e}return null}function h(n){return n.pdRoot||n}function C(n){let t=v(n);return t&&(t.pdRoot=n),t}function d(n){n.removeAttribute("pd-insertion-point"),n.querySelectorAll(".promptdown-cursor").forEach(t=>t.remove())}function p(n){n.setAttribute("pd-insertion-point","true")}function u(n,t){if(t){if(t=="↩"){let e=new l("span");e.setAttribute("style","opacity: 0.2; font-family: monospace;"),e.classList.add("promptdown-control-character");let s=new g("↩");e.appendChild(s),n.appendChild(e);return}if(n.childNodes.length==0)n.setAttribute("text",n.getAttribute("text")+t),n.appendChild(new g(t));else{let e=n.childNodes[n.childNodes.length-1];if(e&&e.nodeType==c.TEXT_NODE)e.textContent+=t;else{let s=new g(t);n.appendChild(s)}}}}function Q(n){let t=n.tagName.toLowerCase();return t=="span"?n.classList.has("promptdown-var-name")?"var-name":n.classList.has("promptdown-var")?"var-value":t:t}function x(n,t=!1){let e=new l("span");e.classList.add("promptdown-var"),e.setAttribute("pd-instant",t);let s=new l("span");return s.setAttribute("class","promptdown-var-name"),p(s),e.appendChild(s),n.appendChild(e),d(n),{instant:!0}}function Y(n){Array.from(n.classList).filter(t=>t.startsWith("color-")).forEach(t=>{n.classList.remove(t)})}function Z(n){let t=n.childNodes[0].innerText,e=Array.from(n.childNodes).slice(1).map(s=>s.textContent).join("");if(t=="wait")return{instant:!0,cmd:"wait",time:parseFloat(e)};if(t=="begin"){let s=new l("p");return s.classList.add("promptdown-container"),s.style.display="inline",p(s),s.setAttribute("id",e),d(n.parentNode),n.parentNode.appendChild(s),{instant:!0}}else if(t=="end"){if(n.parentNode.getAttribute("id")==e)return d(n.parentNode),p(n.parentNode.parentNode),{instant:!0}}else if(t=="fade"){let r=h(n).querySelector("#"+e);r&&r.classList.add("faded")}else if(t=="hide"){let r=h(n).querySelector("#"+e);r&&(r.style.display="none")}return{instant:!0,cmd:n}}function z(n){let t={};if(n.includes("(")){let e=n.match(/([^(]+)\(([^)]*)\)/);e&&(n=e[1],e[2].split(",").forEach(r=>{let i=r.match(/([^=]+)=([^=]+)/);if(i){let a=i[1],o=i[2];t[a]=o}}))}return t.name=n,t}function tt(n){return n=n.replace("[:copy]",""),`\\begin{tcolorbox}[boxrule=0pt, colback=black!5,frame empty]
        ${n.replace(/\[([^\]]+)\|([^\]]+)\]/g,"\\strprm{\\textbf{ $1} $2 }").replace(/\n/g,"\\\\")}
\\end{tcolorbox}`}function et(n,t,e=!1){let s=n.getAttribute("pd-text");e&&(s=tt(s)),s=s.replace(/\[:copy\]$/,""),s=s.replace(/↩/g,""),navigator.clipboard.writeText(s),t.innerText="Copied!",window.setTimeout(()=>{t.innerText="Copy"},1e3)}function nt(n){if(n.innerText=="copy")return{label:"Copy",callback:function(e){let s=h(n).el,r=e.altKey;et(s,this,r)}}}function _(n,t){let e=C(n),s=Q(e);e.getAttribute("text")||e.setAttribute("text","");let r=e.getAttribute("pd-instant")=="true",i=e.getAttribute("pd-next-is-instant")=="true";if(e.getAttribute("pd-next-is-instant")&&e.removeAttribute("pd-next-is-instant"),t=="!")return e.setAttribute("pd-next-is-instant","true"),{instant:!0};if(t=="\\")return e.setAttribute("pd-next-is-escaped","true"),{instant:!0};if(e.getAttribute("pd-next-is-escaped"))return e.removeAttribute("pd-next-is-escaped"),u(e,t),{instant:!0};if(s=="h1")if(t==`
`){let a=new l("p");return p(a),e.parentNode.insertBefore(a,e.nextSibling),d(e),{instant:!0}}else return u(e,t),{instant:!0};else if(s=="p"){if(t=="[")return x(e,i||r)}else if(s=="var-name"){if(t=="_"&&e.innerText=="")return e.style.display="none",{instant:!0};if(t=="@"&&e.innerText=="")return e.style.display="none",e.parentNode.setAttribute("pd-cmd","true"),e.parentNode.classList.add("cmd"),{instant:!0};if(t==":"&&e.innerText==""){if(h(e).getAttribute("animate")=="true"){let a=new it("↺ Replay");a.classList.add("promptdown-button-replay"),a.addEventListener("click",()=>{let o=h(e).el;return O(o),{instant:!0,cmd:"stop"}}),e.parentNode.appendChild(a)}return e.style.display="none",e.setAttribute("pd-component","true"),e.parentNode.classList.add("color-none"),{instant:!0}}else if(t==":"){if(e.innerText=="bubble"){let a=new l("div");a.classList.add("promptdown-bubble-container"),e.parentNode.parentNode.insertBefore(a,e.parentNode),a.appendChild(e.parentNode),e.parentNode.classList.add("promptdown-bubble"),h(e).getAttribute("animate")=="true"&&(e.parentNode.classList.add("animate"),a.classList.add("animate")),e.parentNode.classList.delete("promptdown-var-name"),Y(e.parentNode)}}else if(t=="|"){let a=e.parentNode,o=e.innerText;o.startsWith("_")&&(o=o.slice(1));let A=z(o);if(A.code&&(e.parentNode.classList.add("code_in_prompt"),e.parentNode.classList.add("color-none")),e.innerText=A.name,a.classList.has("promptdown-bubble")){let y=e.innerText.split(":")[1];a.classList.add(y),a.parentNode.classList.add(y)}else if(o=="")e.parentNode.classList.add("color-none");else{let y=L[J(o)%L.length];e.parentNode.classList.add("color-"+y)}return d(e),p(a),{instant:!0}}else{if(t=="]"&&e.getAttribute("pd-component")=="true"){let a=nt(e);if(a)return e.tagName="button",e.style.display="inline-block",e.classList.add(e.innerText),e.innerText=a.label,e.addEventListener("click",a.callback),{instant:!0}}return u(e,t),{instant:!0}}}else if(s=="var-value")if(t=="]"){let a=e.parentNode;return a.classList.has("promptdown-bubble-container")&&(a=a.parentNode),a.setAttribute("pd-ignore-whitespace","true"),p(a),d(e),e.classList.has("cmd")?Z(e):{instant:r}}else return t=="["?x(e,r||i):(u(e,t),{instant:r});if(t=="#"){e.innerText==""&&e.remove();let a=new l("h1");return p(a),n.appendChild(a),d(e),{instant:!0}}return t==" "||t==`
`?e.getAttribute("pd-ignore-whitespace")=="true"?(e.removeAttribute("pd-ignore-whitespace"),u(e,t),{instant:!0}):(u(e,t),{instant:!0}):(u(e,t),{instant:r})}let st=0;class l{constructor(t){typeof t=="string"?this.el=b.createElement(t):this.el=t,this.tagName=this.el.tagName,this.attributes={},this._style={},this.classList=new Set,this.children=[],this.nodeType=c.ELEMENT_NODE,this.parentNode=null,this.syncedElementId=null,this.id=st++,this.eventListeners={}}addEventListener(t,e){this.eventListeners[t]=e}sync(t=null){if(t=t||this.el,!t)throw"No element to sync with";t.removeAttribute("pd-insertion-point"),Object.keys(this.attributes).forEach(i=>{t.setAttribute(i,this.attributes[i])}),Object.keys(this._style).forEach(i=>{t.style[i]=this._style[i]}),t.class="",this.classList.forEach(i=>{t.classList.add(i)});let e=Array.from(t.childNodes),s={},r=new Set;e.forEach(i=>{i.getAttribute&&i.getAttribute("pd-shadow-id")?(s[i.getAttribute("pd-shadow-id")]=i,r.add(i)):i.pd_shadow_id&&(s[i.pd_shadow_id]=i,r.add(i))}),this.children.forEach(i=>{let a=s[i.id];if(r.delete(a),a)i.sync(a);else{let o=null;i.tagName=="TEXT"?(o=b.createTextNode(""),o.pd_shadow_id=i.id):i.tagName=="BUTTON"?(o=b.createElement("button"),o.pd_shadow_id=i.id):(o=b.createElement(i.tagName),o.setAttribute("pd-shadow-id",""+i.id)),t.appendChild(o),i.sync(o),o.shadowElement=i}}),Object.keys(this.eventListeners).forEach(i=>{t.removeEventListener(i,this.eventListeners[i]),t.addEventListener(i,this.eventListeners[i])}),r.forEach(i=>{t.removeChild(i)})}setAttribute(t,e){this.attributes[t]=""+e,t=="class"&&(this.classList=new Set(e.split(" ")))}getAttribute(t){return this.attributes[t]}hasAttribute(t){return this.attributes[t]!=null}removeAttribute(t){delete this.attributes[t]}get childNodes(){return this.children}get innerText(){return this.children.map(t=>t.innerText).join("")}set innerText(t){this.children=[new g(t)]}get style(){return this._style}set style(t){this._style=t}appendChild(t){this.children.push(t),t.parentNode&&t.parentNode.removeChild(t),t.parentNode=this}insertBefore(t,e){if(!e){this.appendChild(t);return}let s=this.children.indexOf(e);if(s==-1)throw"Reference node not found";this.children.splice(s,0,t),t.parentNode&&t.parentNode.removeChild(t),t.parentNode=this}querySelectorAll(t){if(!t.startsWith("."))throw"Only class selectors are supported";let e=t.slice(1),s=[];return this.children.forEach(r=>{r.classList.has(e)&&s.push(r),r.querySelectorAll(t).forEach(i=>{s.push(i)})}),this.classList.has(e)&&s.push(this),s}querySelector(t){if(!t.startsWith("#"))throw"Only id selectors are supported";let e=t.slice(1);if(this.attributes.id==e)return this;let s=[];return this.children.forEach(r=>{let i=r.querySelector(t);i&&s.push(i)}),s.length==0?null:s[0]}remove(){this.parentNode&&(this.parentNode.children=this.parentNode.children.filter(t=>t!=this))}removeChild(t){this.children=this.children.filter(e=>e!=t)}}class it extends l{constructor(t){super("button"),this.label=t,this.eventListeners={}}addEventListener(t,e){this.eventListeners[t]=e}sync(t=null){super.sync(t),t.innerText=this.label,Object.keys(this.eventListeners).forEach(e=>{t.addEventListener(e,this.eventListeners[e])})}}class g extends l{constructor(t){super("text"),this.nodeType=c.TEXT_NODE,this.textContent=t}sync(t=null){if(!t)throw"No element to sync with";t.textContent=this.textContent}get innerText(){return this.textContent}}function O(n,t=null,e=!1){let s=n.getAttribute("pd-text")||n.innerText;t!=null&&(s=t),n.innerText="",n.setAttribute("pd-text",s);let r=n.getAttribute("animate")=="true",i=r?1e3/parseFloat(n.getAttribute("animate-speed")):0;isNaN(i)&&(i=6.66);let a=parseInt(n.getAttribute("animate-step-size"));isNaN(a)&&(a=4),n=new l(n),n.setAttribute("animate",r),n.appendChild(new l("p")),n.childNodes[0].setAttribute("pd-insertion-point","true"),n.style.opacity=1,r&&!e?m(n,s,i,0,a):(s.split("").forEach(o=>_(n,o)),n.sync())}function m(n,t,e,s=0,r=1){if(!t){n.sync();let a=C(n);d(a);return}let i=_(n,t[0]);if(i.cmd=="wait"){n.sync(),window.setTimeout(()=>{m(n,t.slice(1),e,0,r)},i.time);return}else if(i.cmd=="stop")return;i.instant?m(n,t.slice(1),e,s+1,r):s%r==0?(n.sync(),window.setTimeout(()=>{m(n,t.slice(1),e,s+1,r)},e)):m(n,t.slice(1),e,s+1,r)}if(!c)var c={ELEMENT_NODE:1,TEXT_NODE:3};if(!b)var b={createElement:function(n){return new N(n)},createTextNode:function(n){return new N("text")}};class N{constructor(t){this.tagName=t,this.attributes={},this.childNodes=[],this.classList=new Set,this.style={}}set innerText(t){this.childNodes=[new N("text")],this.childNodes[0].textContent=t}get innerText(){return this.childNodes.map(t=>t.innerText).join("")}getElementType(){return this.tagName=="text"?c.TEXT_NODE:c.ELEMENT_NODE}setAttribute(t,e){if(t=="class"){this.classList=new Set(e.split(" "));return}this.attributes[t]=e}getAttribute(t){return t=="class"?Array.from(this.classList).join(" "):this.attributes[t]}removeAttribute(t){delete this.attributes[t]}appendChild(t){this.childNodes.push(t)}toHTML(t=!0){if(this.tagName=="text")return this.textContent;t&&(this.attributes.animate="true",this.attributes.__animate="true",this.attributes["animate-speed"]="50");let e=`<${this.tagName}`;return Object.keys(this.attributes).filter(s=>s!="class").forEach(s=>{e+=` ${s}="${this.attributes[s]}"`}),this.classList.size>0&&(e+=` class="${Array.from(this.classList).join(" ")}"`),Object.keys(this.style).length>0&&(e+=' style="',Object.keys(this.style).forEach(s=>{e+=`${s}: ${this.style[s]};`}),e+='"'),e+=">",this.childNodes.forEach(s=>{e+=s.toHTML(!1)}),e+=`</${this.tagName}>`,e}}const rt={extends:E,Layout:()=>T(E.Layout,null,{}),enhanceApp({app:n,router:t,siteData:e}){let s={install(r){r.config.globalProperties.$pd=O}};n.use(s)}};function S(n){if(n.extends){const t=S(n.extends);return{...t,...n,async enhanceApp(e){t.enhanceApp&&await t.enhanceApp(e),n.enhanceApp&&await n.enhanceApp(e)}}}return n}const f=S(rt),at=V({name:"VitePressApp",setup(){const{site:n}=H();return W(()=>{X(()=>{document.documentElement.lang=n.value.lang,document.documentElement.dir=n.value.dir})}),U(),G(),K(),f.setup&&f.setup(),()=>T(f.Layout)}});async function ot(){const n=dt(),t=lt();t.provide(j,n);const e=k(n.route);return t.provide(P,e),t.component("Content",R),t.component("ClientOnly",I),Object.defineProperties(t.config.globalProperties,{$frontmatter:{get(){return e.frontmatter.value}},$params:{get(){return e.page.value.params}}}),f.enhanceApp&&await f.enhanceApp({app:t,router:n,siteData:M}),{app:t,router:n,data:e}}function lt(){return $(at)}function dt(){let n=w,t;return q(e=>{let s=B(e),r=null;return s&&(n&&(t=s),(n||t===s)&&(s=s.replace(/\.js$/,".lean.js")),r=F(()=>import(s),[])),w&&(n=!1),r},f.NotFound)}w&&ot().then(({app:n,router:t,data:e})=>{t.go().then(()=>{D(t.route,e.site),n.mount("#app")})});export{ot as createApp};
